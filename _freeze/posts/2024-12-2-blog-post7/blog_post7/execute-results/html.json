{
  "hash": "7c25b7bc680fc390a66acdae126fde9d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Blog post7\"\nsubtitle: \"\"\nauthor: \"group 3\"\ndate: \"2024-12-2\"\ndescription: \"Thesis: Students graduated from better schools will get higher earnings after graduation.\"\nimage-alt: \"\"\ncategories: []\ndate-modified: \"2024-12-9\"\ndraft: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tidyr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\neducation_cohort_combined_data1 <- read_rds(\"dataset/education_cohort_combined_data.rds\")\n\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  mutate(\n    EARN_MDN_5YR = as.numeric(EARN_MDN_5YR)\n  ) |>\n  select(\n    'EARN_MDN_5YR',\n    'INSTNM',\n    'EARN_COUNT_WNE_5YR',\n    'CIPDESC',\n    'CREDDESC',\n    'ZIP',\n    starts_with('PCT_')\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `EARN_MDN_5YR = as.numeric(EARN_MDN_5YR)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\nfield_summary <- education_cohort_combined_data1 |>\n  group_by(CIPDESC) |>\n  summarise(\n    Avg_Earning_5YR = mean(EARN_MDN_5YR, na.rm = TRUE),\n    Total_Earning_5YR = sum(EARN_MDN_5YR, na.rm = TRUE),\n    Count = n()\n  ) |>\n  arrange(desc(Total_Earning_5YR))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nInstitution_summary <- education_cohort_combined_data1 |>\n  group_by(INSTNM) |>\n  summarise(\n    Avg_Earning_5YR = mean(EARN_MDN_5YR, na.rm = TRUE),\n    Total_Earning_5YR = sum(EARN_MDN_5YR, na.rm = TRUE),\n    Count = n()\n  ) |>\n  arrange(desc(Total_Earning_5YR)) |>\n  arrange(desc(Avg_Earning_5YR))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Total earnings of different fields of study ranking\ntop_fields <- field_summary |>\n  top_n(30, Total_Earning_5YR)\n#Listing the fields of study with the highest employment outcomes in a descending order\nggplot(top_fields, aes(x = reorder(CIPDESC, -Total_Earning_5YR), y = Total_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Fields of Study Total Earnings\", x = \"Field of Study\", y = \"Total Earnings)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Average earnings of different fields of study ranking\ntop_fields2 <- field_summary |>\n  top_n(30, Avg_Earning_5YR)\n#Listing the fields of study with the highest employment outcomes in a descending order\nggplot(top_fields2, aes(x = reorder(CIPDESC, -Avg_Earning_5YR), y = Avg_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Fields of Study Average Earnings\", x = \"Field of Study\", y = \"Average Earnings)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bar chart for top institutions in Massachusetts\ntop_institutions <- Institution_summary %>%\n  top_n(10, Avg_Earning_5YR)\n\nggplot(top_institutions, aes(x = reorder(INSTNM, -Avg_Earning_5YR), y = Avg_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Institutions by Employment Outcomes\", x = \"Institution\", y = \"Average Earning (5 Years After Completion)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert PCT_RACE to numeric\neducation_cohort_combined_data1$PCT_WHITE <- as.numeric(education_cohort_combined_data1$PCT_WHITE)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_BLACK <- as.numeric(education_cohort_combined_data1$PCT_BLACK)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_ASIAN <- as.numeric(education_cohort_combined_data1$PCT_ASIAN)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_HISPANIC <- as.numeric(education_cohort_combined_data1$PCT_HISPANIC)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check if columns used in weighted.mean are numeric\nstr(education_cohort_combined_data1$PCT_WHITE)  # Should be numeric\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:6499] NA 74.5 74.5 74.5 74.5 ...\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(education_cohort_combined_data1$EARN_COUNT_WNE_5YR)  # Should be numeric\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n chr [1:6499] \"22\" \"PS\" \"PS\" \"170\" \"82\" \"PS\" \"50\" \"PS\" \"PS\" \"30\" \"PS\" \"PS\" ...\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  mutate(\n    EARN_COUNT_WNE_5YR = as.numeric(EARN_COUNT_WNE_5YR)  # Convert to numeric\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `EARN_COUNT_WNE_5YR = as.numeric(EARN_COUNT_WNE_5YR)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Remove rows with NA in key columns\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  filter(!is.na(EARN_MDN_5YR) & !is.na(PCT_WHITE) & !is.na(PCT_BLACK))\n\nfield_race_summary <- education_cohort_combined_data1 |>\n  group_by(CIPDESC) |>\n  summarise(\n    Avg_White = weighted.mean(PCT_WHITE, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Black = weighted.mean(PCT_BLACK, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Hispanic = weighted.mean(PCT_HISPANIC, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Asian = weighted.mean(PCT_ASIAN, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Earnings = mean(EARN_MDN_5YR, na.rm = TRUE)\n  ) |>\n  arrange(desc(Avg_Earnings))\n\nfield_race_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 198 × 6\n   CIPDESC               Avg_White Avg_Black Avg_Hispanic Avg_Asian Avg_Earnings\n   <chr>                     <dbl>     <dbl>        <dbl>     <dbl>        <dbl>\n 1 Advanced/Graduate De…      77.2      9.20        10.1       6.45      241981 \n 2 Statistics.                74.1     10.3         11.9       7.40      229811 \n 3 Applied Mathematics.       74.1     10.3         11.9       7.40      178318 \n 4 Dentistry.                 80.4      7.80         8.67      5.64      164715.\n 5 Systems Engineering.       80.7      7.02        10.5       5.63      164194 \n 6 Computer Science.          82.8      6.36         8.16      4.89      155370.\n 7 Human Computer Inter…      85.6      5.47         6.12      4.16      152624.\n 8 Computer Engineering.      83.7      6.09         7.31      4.69      146994.\n 9 Engineering-Related …      86.3      5.51         5.72      3.57      139144.\n10 Taxation.                  86.2      5.25         5.69      3.85      134286.\n# ℹ 188 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# all schools in MA that is in the data\nunique_institutions <- education_cohort_combined_data1 |>\n  distinct(INSTNM)\nunique_institutions\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                                                           INSTNM\n1                                  American International College\n2                                                 Amherst College\n3                                              Anna Maria College\n4                                           Assumption University\n5                                                  Babson College\n6                                    Bard College at Simon's Rock\n7                                             Bay Path University\n8                                               Bay State College\n9              Benjamin Franklin Cummings Institute of Technology\n10                                             Bentley University\n11                                       Berklee College of Music\n12                                    Berkshire Community College\n13                                   Boston Architectural College\n14                                                 Boston College\n15                                              Boston University\n16                                            Brandeis University\n17                                   Bridgewater State University\n18                                      Bristol Community College\n19                                  Bunker Hill Community College\n20                                              Cambridge College\n21                                     Cape Cod Community College\n22                         Catherine Hinds Institute of Esthetics\n23                                               Clark University\n24                                College of Our Lady of the Elms\n25                                      College of the Holy Cross\n26                                                  Curry College\n27                                                   Dean College\n28                             Diman Regional Technical Institute\n29                                       Eastern Nazarene College\n30        Elizabeth Grady School of Esthetics and Massage Therapy\n31                                                Emerson College\n32                                               Emmanuel College\n33                                    Empire Beauty School-Boston\n34                                    Empire Beauty School-Malden\n35                                               Endicott College\n36                                          FINE Mortuary College\n37                                                 Fisher College\n38                                     Fitchburg State University\n39                                    Framingham State University\n40                                                 Gordon College\n41                            Gordon-Conwell Theological Seminary\n42                                Greater Lowell Technical School\n43                                   Greenfield Community College\n44                                              Hampshire College\n45                                             Harvard University\n46  Hellenic College-Holy Cross Greek Orthodox School of Theology\n47                                      Holyoke Community College\n48                                  Laboure College of Healthcare\n49                                              Lasell University\n50                   Lawrence Memorial Hospital School of Nursing\n51                                              Lesley University\n52                         Lincoln Technical Institute-Somerville\n53                           Lowell Academy Hairstyling Institute\n54                            Massachusetts Bay Community College\n55                        Massachusetts College of Art and Design\n56                          Massachusetts College of Liberal Arts\n57                          Massachusetts Institute of Technology\n58                                 Massachusetts Maritime Academy\n59                              Massachusetts School of Barbering\n60                                    Massasoit Community College\n61                                               MCPHS University\n62                                              Merrimack College\n63                            MGH Institute of Health Professions\n64                                    Middlesex Community College\n65                                Mildred Elley-Pittsfield Campus\n66                                      Montserrat College of Art\n67                                                     Monty Tech\n68                          Motoring Technical Training Institute\n69                                          Mount Holyoke College\n70                              Mount Wachusett Community College\n71                       National Aviation Academy of New England\n72                               New England College of Optometry\n73                                       New England Hair Academy\n74                                         New England Law-Boston\n75   New England Tractor Trailer Training School of Massachusetts\n76                                                Nichols College\n77                                     North Bennet Street School\n78                                  North Shore Community College\n79                                        Northeastern University\n80                  Northeastern University Professional Programs\n81                               Northern Essex Community College\n82                                       Northpoint Bible College\n83                                                 Quincy College\n84                                 Quinsigamond Community College\n85                                                  Regis College\n86                                      Rob Roy Academy-Worcester\n87                                      Roxbury Community College\n88                                         Salem State University\n89                   Shawsheen Valley School of Practical Nursing\n90       Signature Healthcare Brockton Hospital School of Nursing\n91                                             Simmons University\n92                                                  Smith College\n93                               Southeastern Technical Institute\n94                                    Spa Tech Institute-Plymouth\n95                                    Spa Tech Institute-Westboro\n96                                            Springfield College\n97                        Springfield Technical Community College\n98                                              Stonehill College\n99                                             Suffolk University\n100                         The New England Conservatory of Music\n101                     Toni & Guy Hairdressing Academy-Worcester\n102                                              Tufts University\n103               University of Massachusetts Chan Medical School\n104                           University of Massachusetts-Amherst\n105                            University of Massachusetts-Boston\n106                         University of Massachusetts-Dartmouth\n107                            University of Massachusetts-Lowell\n108                                       Urban College of Boston\n109                                             Wellesley College\n110                             Wentworth Institute of Technology\n111                                Western New England University\n112                                    Westfield State University\n113                               Wheaton College (Massachusetts)\n114                                              Williams College\n115                               Worcester Polytechnic Institute\n116                                    Worcester State University\n```\n\n\n:::\n:::",
    "supporting": [
      "blog_post7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}