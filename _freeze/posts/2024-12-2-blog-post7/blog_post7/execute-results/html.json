{
  "hash": "bf806ada282f76629742810c25ebed79",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Blog post7\"\nsubtitle: \"\"\nauthor: \"group 3\"\ndate: \"2024-12-2\"\ndescription: \"Thesis: The relationship between the popularity of different majors and employment outcomes\"\nimage-alt: \"\"\ncategories: []\ndate-modified: \"2024-12-9\"\ndraft: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\neducation_cohort_combined_data1 <- read_rds(\"dataset/education_cohort_combined_data.rds\")\n\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  mutate(\n    EARN_MDN_5YR = as.numeric(EARN_MDN_5YR)\n  ) |>\n  select(\n    'EARN_MDN_5YR',\n    'INSTNM',\n    'EARN_COUNT_WNE_5YR',\n    'CIPDESC',\n    'CREDDESC',\n    'ZIP',\n    starts_with('PCT_')\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `EARN_MDN_5YR = as.numeric(EARN_MDN_5YR)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\nfield_summary <- education_cohort_combined_data1 |>\n  group_by(CIPDESC) |>\n  summarise(\n    Avg_Earning_5YR = mean(EARN_MDN_5YR, na.rm = TRUE),\n    Total_Earning_5YR = sum(EARN_MDN_5YR, na.rm = TRUE),\n    Count = n()\n  ) |>\n  arrange(desc(Total_Earning_5YR))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nInstitution_summary <- education_cohort_combined_data1 |>\n  group_by(INSTNM) |>\n  summarise(\n    Avg_Earning_5YR = mean(EARN_MDN_5YR, na.rm = TRUE),\n    Total_Earning_5YR = sum(EARN_MDN_5YR, na.rm = TRUE),\n    Count = n()\n  ) |>\n  arrange(desc(Total_Earning_5YR)) |>\n  arrange(desc(Avg_Earning_5YR))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Total earnings of different fields of study ranking\ntop_fields <- field_summary |>\n  top_n(30, Total_Earning_5YR)\n#Listing the fields of study with the highest employment outcomes in a descending order\nggplot(top_fields, aes(x = reorder(CIPDESC, -Total_Earning_5YR), y = Total_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Fields of Study Total Earnings\", x = \"Field of Study\", y = \"Total Earnings)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Average earnings of different fields of study ranking\ntop_fields2 <- field_summary |>\n  top_n(30, Avg_Earning_5YR)\n#Listing the fields of study with the highest employment outcomes in a descending order\nggplot(top_fields2, aes(x = reorder(CIPDESC, -Avg_Earning_5YR), y = Avg_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Fields of Study Average Earnings\", x = \"Field of Study\", y = \"Average Earnings)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Bar chart for top institutions in Massachusetts\ntop_institutions <- Institution_summary %>%\n  top_n(10, Avg_Earning_5YR)\n\nggplot(top_institutions, aes(x = reorder(INSTNM, -Avg_Earning_5YR), y = Avg_Earning_5YR)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  labs(title = \"Top Institutions by Employment Outcomes\", x = \"Institution\", y = \"Average Earning (5 Years After Completion)\")\n```\n\n::: {.cell-output-display}\n![](blog_post7_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert PCT_RACE to numeric\neducation_cohort_combined_data1$PCT_WHITE <- as.numeric(education_cohort_combined_data1$PCT_WHITE)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_BLACK <- as.numeric(education_cohort_combined_data1$PCT_BLACK)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_ASIAN <- as.numeric(education_cohort_combined_data1$PCT_ASIAN)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\neducation_cohort_combined_data1$PCT_HISPANIC <- as.numeric(education_cohort_combined_data1$PCT_HISPANIC)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: NAs introduced by coercion\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check if columns used in weighted.mean are numeric\nstr(education_cohort_combined_data1$PCT_WHITE)  # Should be numeric\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:6499] NA 74.5 74.5 74.5 74.5 ...\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(education_cohort_combined_data1$EARN_COUNT_WNE_5YR)  # Should be numeric\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n chr [1:6499] \"22\" \"PS\" \"PS\" \"170\" \"82\" \"PS\" \"50\" \"PS\" \"PS\" \"30\" \"PS\" \"PS\" ...\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  mutate(\n    EARN_COUNT_WNE_5YR = as.numeric(EARN_COUNT_WNE_5YR)  # Convert to numeric\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `EARN_COUNT_WNE_5YR = as.numeric(EARN_COUNT_WNE_5YR)`.\nCaused by warning:\n! NAs introduced by coercion\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Remove rows with NA in key columns\neducation_cohort_combined_data1 <- education_cohort_combined_data1 |>\n  filter(!is.na(EARN_MDN_5YR) & !is.na(PCT_WHITE) & !is.na(PCT_BLACK))\n\nfield_race_summary <- education_cohort_combined_data1 |>\n  group_by(CIPDESC) |>\n  summarise(\n    Avg_White = weighted.mean(PCT_WHITE, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Black = weighted.mean(PCT_BLACK, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Hispanic = weighted.mean(PCT_HISPANIC, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Asian = weighted.mean(PCT_ASIAN, EARN_COUNT_WNE_5YR, na.rm = TRUE),\n    Avg_Earnings = mean(EARN_MDN_5YR, na.rm = TRUE)\n  ) |>\n  arrange(desc(Avg_Earnings))\n\nfield_race_summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 198 × 6\n   CIPDESC               Avg_White Avg_Black Avg_Hispanic Avg_Asian Avg_Earnings\n   <chr>                     <dbl>     <dbl>        <dbl>     <dbl>        <dbl>\n 1 Advanced/Graduate De…      77.2      9.20        10.1       6.45      241981 \n 2 Statistics.                74.1     10.3         11.9       7.40      229811 \n 3 Applied Mathematics.       74.1     10.3         11.9       7.40      178318 \n 4 Dentistry.                 80.4      7.80         8.67      5.64      164715.\n 5 Systems Engineering.       80.7      7.02        10.5       5.63      164194 \n 6 Computer Science.          82.8      6.36         8.16      4.89      155370.\n 7 Human Computer Inter…      85.6      5.47         6.12      4.16      152624.\n 8 Computer Engineering.      83.7      6.09         7.31      4.69      146994.\n 9 Engineering-Related …      86.3      5.51         5.72      3.57      139144.\n10 Taxation.                  86.2      5.25         5.69      3.85      134286.\n# ℹ 188 more rows\n```\n\n\n:::\n:::",
    "supporting": [
      "blog_post7_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}